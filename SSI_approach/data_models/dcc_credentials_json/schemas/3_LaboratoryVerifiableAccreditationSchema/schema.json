{
  "$schema": "http://json-schema.org/draft/2020-12/schema",
  "$id":"https://raw.githubusercontent.com/desdotl/schemas/master/dcc_schemas/3_LaboratoryVerifiableAccreditationSchema/schema.json",
  "title": "DCC Certification Verifiable Accreditation records",
  "description": "DCC Certification Verifiable Accreditation schema for calbration contexts",
  "definitions": {
    "credentialSubject": {
          "type": "object", 
          "required": ["id", "authorizationClaims"],
          "properties": {
            "id": {
              "description": "Refer to the subject DID",
              "type": "string"
            },
            "authorizationClaims": {
              "description": "Defines a list of claims that define/determine the authorization of an Issuer to issue certain types of VCs. Mandatory",
              "type": "object",
              "required": ["accreditationScope", "limitJurisdiction"],
              "properties": {
                "accreditationScope": {
                  "description": " Defines the specific accreditation scope that was accredited ",
                  "type": "array",
                  "minItems":1,
                  "items": {
                    "type": "object",
                    "required":["id,CMC"],
                    "properties": {
                      "id": {
                        "description": "Identifier for Accreditation area ",
                        "type": "string",
                        "format": "uri"
                      },
                      "CMC": {
                        "description": "Defines the list of Calibration and Measurement Capability Uncertainity of the Laboratory for that specific measure.",
                        "type": "array",
                        "minItems":1,
                        "items": {
                          "description":"Define the CMC for a certain quantity and a certain interval in relative uncertainty",
                          "type":"object",
                          "required":["instrmentOrProperty","si-unit","interval","uncertainity"],
                          "properties":{
                            "instrmentOrProperty": {
                              "description": "Defines the type of calibration",
                              "type": "string"
                            
                            },
                            "si-unit":{
                              "description":"Quantity unit in SI-Format",
                              "type":"string"
                            },
                            "interval":{
                                "description":"Define the interval where CMC applies",
                                "type":"object",
                                "properties":{
                                  "min":{
                                    "description":"The interval lower bound",
                                    "type":"string"
                                  },
                                  "max":{
                                    "description":"The interval upper bound",
                                    "type":"string"
                                  }
                                }
                            },
                            "uncertainity":{"$ref": "https://raw.githubusercontent.com/desdotl/schemas/master/dcc_schemas/9_PTBSchema/dcc.json#/definitions/formulaType"}
                          }
                        }
                      }
                    }
                  }
                },
                "limitJurisdiction":  {
                  "description": "Defines the jurisdiction for which the accreditation is valid",
                  "type": "array",
                  "minItems":1,
                  "items": {
                    "type": "string",
                    "format": "uri"
                  }
                }
              }
            }
          }
        }
  },
  "type": "object",
  "properties": {
    "credentialSubject":{"$ref": "#/definitions/credentialSubject"}
  }
}
